# Cursor 用户规则（User Rules）

> Android/Flutter 开发者，主要使用 Flutter，同时进行 Android 原生开发

## 1. 沟通与解释风格

### 语言偏好
- **优先使用简体中文**回答问题和解释代码
- 代码注释和文档使用中文
- 技术术语可以使用英文，但解释用中文

### 代码解释
- **解释程度**：一般即可，不需要过度详细
- **问题处理**：遇到问题先给出分析，再提供解决方案
- **结论位置**：分析在前，结论在后（与项目规则不同，这里更注重分析过程）

### 代码展示
- 只展示**关键代码片段**，避免整文件贴出
- 基础逻辑无需注释（如变量声明、常见 API 调用）
- 复杂逻辑或特殊场景需要简要说明目的

## 2. 技术栈偏好

### Android 原生开发
- **语言**：Kotlin 和 Java 都精通，根据项目需要选择
- **UI 布局**：目前主要使用 XML 布局
- **架构模式**：简单 MVC 即可，业务逻辑简单，不需要过度设计
- **异步处理**：协程和 RxJava 都熟悉，根据场景选择

### Flutter 开发
- **主要技术栈**：Flutter 为主要开发方向
- **适配考虑**：
  - 使用响应式布局（MediaQuery、LayoutBuilder）
  - 使用相对单位（dp 逻辑像素）
  - 考虑不同屏幕尺寸的适配
- **版本兼容**：
  - Flutter SDK 版本统一管理
  - Platform Channel 的 Android/iOS 原生代码需要版本兼容
  - 第三方插件的最低版本要求

### 混合开发
- Flutter 为主，Android 原生为辅
- 需要 Platform Channel 交互时，确保两端代码兼容

### 脚本/工具开发
- **语言**：PHP 和 Python 用于脚本和工具开发
- **开发原则**：简单直接，快速实现功能，不需要过度设计
- **代码风格**：
  - Python：遵循 PEP 8 规范，使用 snake_case 命名
  - PHP：遵循 PSR 规范，使用 camelCase 或 snake_case（根据项目习惯）
- **架构**：脚本工具通常不需要复杂架构，保持简洁即可
- **错误处理**：关键操作需要错误处理，简单脚本可以简单处理

## 3. 代码风格

### 命名规范
- **描述性命名**：要求描述性，但不宜过长
- **Android/Kotlin**：
  - 类名：PascalCase（如 `UserRepository`）
  - 方法/变量：camelCase（如 `fetchUserData()`、`userName`）
  - 常量：UPPER_SNAKE_CASE（如 `MAX_RETRY_COUNT`）
- **Python 脚本**：
  - 遵循 PEP 8：函数/变量使用 snake_case（如 `fetch_user_data()`、`user_name`）
  - 类名：PascalCase
  - 常量：UPPER_SNAKE_CASE
- **PHP 脚本**：
  - 根据项目习惯选择 camelCase 或 snake_case
  - 类名：PascalCase
  - 常量：UPPER_SNAKE_CASE

### 函数设计
- 函数长度适中，避免过长
- 单一职责原则
- 优先使用 Kotlin 现代特性（扩展函数、Data Class、Sealed Class 等）

### 代码组织
- 简单业务逻辑使用 MVC 即可
- 避免过度架构设计
- 保持代码简洁、易读

## 4. 依赖与工具

### 依赖管理
- **熟悉工具**：Version Catalog、buildSrc 都使用过
- **选择原则**：根据项目需要选择，没有强制偏好

### 常用库
- **网络库**：Retrofit（熟悉，但其他库也会用）
- **图片加载**：Glide（熟悉，但其他库也会用）
- **选择原则**：熟悉这些库，但不排斥其他库，根据项目需要选择

## 5. 错误处理

### 异常处理方式
- **主要方式**：使用 try-catch（习惯方式）
- **可选方式**：可以尝试 Result 封装（都懂，可以接受）
- **选择原则**：根据场景选择，不强制统一

### 日志记录
- 关键错误需要记录日志
- 使用合适的日志级别

## 6. 性能与优化

### 性能要求
- **性能标准**：一般即可，不需要极致优化
- **优化原则**：避免明显性能问题，保持代码可维护性

### 国际化
- **当前需求**：暂不需要国际化
- **预留空间**：代码设计时尽量给国际化留出实现空间
- **字符串资源**：使用资源文件，避免硬编码

## 7. 安全要求

- 没有特定安全要求
- 遵循常规安全实践即可

## 8. Flutter 特定规范

### 适配问题
- **屏幕适配**：使用响应式布局，考虑不同屏幕尺寸
- **版本兼容**：Flutter SDK 版本统一，主要关注插件兼容性
- **Platform Channel**：确保原生代码的版本兼容性

### 代码风格
- 遵循 Flutter/Dart 官方代码规范
- 使用 Dart 现代特性（null safety、extension methods 等）

## 9. 协作方式

### 代码修改
- **修改前说明**：简要说明核心思路和改动范围（2-3 句话）
- **多文件改动**：按"核心模块 → 依赖模块"顺序分步描述
- **方案选择**：优先推荐"贴合现有架构 + 低侵入"的方案

### 问题排查
- 先分析问题原因
- 再提供解决方案
- 解释简洁、直接

## 10. 代码质量

### 可维护性
- 保持代码简洁
- 避免过度设计
- 单一职责原则

### 可测试性
- 业务逻辑与 UI 分离（MVC 架构）
- 关键逻辑可测试

## 11. 特殊场景处理

### 复杂逻辑
- 需要简要注释说明目的
- 特殊用法需要标注（如反射、JNI、字节码操作等）

### 跨平台开发
- Flutter 与 Android 原生交互时，确保接口兼容
- Platform Channel 调用需要错误处理

### 脚本开发特殊场景
- **快速工具**：优先快速实现，不需要过度设计
- **可维护性**：如果脚本会长期使用，保持代码清晰易读
- **错误处理**：关键操作需要错误处理，简单脚本可以简单处理
- **依赖管理**：
  - Python：使用 `requirements.txt` 或 `pyproject.toml`
  - PHP：使用 Composer（如果需要）
- **运行环境**：考虑跨平台兼容性（Windows/Linux/Mac）

